"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = __importDefault(require("express"));
const volunteerController_1 = __importDefault(require("../../controllers/volunteerController"));
const volunteerUsecase_1 = __importDefault(require("../../useCases/volunteerUsecase"));
const jwtAuth_1 = __importDefault(require("../utils/jwtAuth"));
const mailGenerator_1 = __importDefault(require("../utils/mailGenerator"));
const otpGenerator_1 = __importDefault(require("../utils/otpGenerator"));
const hashedPassword_1 = __importDefault(require("../utils/hashedPassword"));
const volunteerRepository_1 = __importDefault(require("../repositories/volunteerRepository"));
const cloudinary_1 = __importDefault(require("../utils/cloudinary"));
const multer_1 = require("../middlewares/multer");
const volunteerAuth_1 = __importDefault(require("../middlewares/volunteerAuth"));
const communityUsecase_1 = __importDefault(require("../../useCases/communityUsecase"));
const communityRepository_1 = __importDefault(require("../repositories/communityRepository"));
const communityController_1 = __importDefault(require("../../controllers/communityController"));
const chatController_1 = __importDefault(require("../../controllers/chatController"));
const chatUsecase_1 = __importDefault(require("../../useCases/chatUsecase"));
const chatRepository_1 = __importDefault(require("../repositories/chatRepository"));
const router = express_1.default.Router();
const volunteerRepo = new volunteerRepository_1.default();
const otp = new otpGenerator_1.default();
const jwt = new jwtAuth_1.default();
const mail = new mailGenerator_1.default();
const hash = new hashedPassword_1.default();
const cloudinary = new cloudinary_1.default();
const communityRepo = new communityRepository_1.default();
const chatRepo = new chatRepository_1.default();
const useCase = new volunteerUsecase_1.default(volunteerRepo, otp, jwt, mail, hash, cloudinary);
const volunteerController = new volunteerController_1.default(useCase);
const community = new communityUsecase_1.default(communityRepo, otp, jwt, mail, hash, cloudinary);
const commController = new communityController_1.default(community);
const chat = new chatUsecase_1.default(chatRepo);
const chatNewController = new chatController_1.default(chat);
router.post('/signup', (req, res) => volunteerController.signup(req, res));
router.post('/verifyOtp', (req, res) => volunteerController.verifyOtp(req, res));
router.post('/login', (req, res) => volunteerController.login(req, res));
router.get('/logout', (req, res) => volunteerController.logout(req, res));
router.post('/resendOtp', (req, res) => volunteerController.resendOtp(req, res));
router.post('/changePassword', (req, res) => volunteerController.changePassword(req, res));
router.get('/profile', volunteerAuth_1.default, (req, res) => volunteerController.getProfile(req, res));
router.patch('/editProfile', volunteerAuth_1.default, multer_1.uploadFile.single('profileImage'), (req, res) => volunteerController.editProfile(req, res));
router.get('/community/:id', (req, res) => commController.getCommunityById(req, res));
router.post('/enroll', (req, res) => volunteerController.enrollToCommunity(req, res));
router.get('/getVolunteer', (req, res) => volunteerController.getVolunteerById(req, res));
router.get('/getEvents', volunteerAuth_1.default, (req, res) => volunteerController.getEvents(req, res));
router.post('/enrollToEvent', volunteerAuth_1.default, (req, res) => volunteerController.enrollToEvent(req, res));
router.get('/getNotEnrolledEvents', volunteerAuth_1.default, (req, res) => volunteerController.getNotEnrolledEvents(req, res));
router.get('/getEnrolledEvents', volunteerAuth_1.default, (req, res) => volunteerController.getEnrolledEvents(req, res));
router.post("/saveMessages", (req, res) => chatNewController.sendMessage(req, res));
router.get("/conversations/:id", (req, res) => chatNewController.fetchConversation(req, res));
router.get("/messages/:id", (req, res) => chatNewController.getMessages(req, res));
exports.default = router;
